% !TeX encoding = windows-1251
\section{Анализ предметной области и существующих решений}

\subsection{Особенности рекомендательных систем}

Рекомендательные системы (РС) являются неотъемлемой частью современных цифровых платформ, предоставляя пользователям персонализированные предложения продуктов, услуг или контента. Они находят широкое применение в различных областях, включая электронную коммерцию, стриминговые сервисы, социальные сети и онлайн-знакомства.

Современные рекомендательные сталкиваются с рядом проблем:
\begin{itemize}
	\item отсутствие информации о новых пользователях и объектах (проблема холодного старта)\cite{zhao2025coldstart};
	\item высокая разреженность пользовательско-объектных матриц\cite{wang2023datascarcity};
	\item необходимость обеспечения справедливости и отсутствия предвзятости в рекомендациях\cite{jin2023fairness}.
\end{itemize}

Современные исследования направлены на преодоление этих ограничений, в том числе с использованием больших языковых моделей, методов объяснимого машинного обучения и расширения пользовательского контекста.

\subsection{Обзор рекомендательных систем в сфере онлайн-знакомств}

Онлайн-сервисы знакомств предъявляют особые требования к алгоритмам рекомендаций. Поскольку конечной целью является установление реального или виртуального контакта между людьми, системы должны максимально точно учитывать совместимость по широкому спектру признаков, при этом оставаясь достаточно лёгкими в вычислении и объяснимыми.

\subsubsection{OkCupid}

Платформа OkCupid применяет нетривиальный подход к построению рекомендаций, фокусируясь на глубоком анализе анкет пользователей и их ответов на вопросы. В отличие от многих систем, которые ориентируются лишь на поведение (например, свайпы), OkCupid делает упор на содержательные признаки совместимости.

Пользователи проходят опросы, отвечая на вопросы о ценностях, привычках, интересах и взглядах. Для каждого вопроса пользователь:

\begin{itemize}
	\item указывает свой собственный ответ;
	\item выбирает приемлемые для него ответы потенциального партнёра;
	\item определяет важность соответствия по этому вопросу.
\end{itemize}

Таким образом, для каждого пользователя можно получить богатый профиль предпочтений, включающий не только их мнения, но и ожидания от других.

Основой рекомендательной системы OkCupid служит собственная метрика совместимости, вычисляемая по формуле, напоминающей обобщённую версию взвешенного совпадения. Пусть пользователь $A$ ответил на $n$ вопросов, по которым можно сопоставить ответы с пользователем $B$. Тогда их совместимость вычисляется по следующей схеме:

\begin{enumerate}
	\item Для каждого вопроса $i$ определяется
		$s_i^A$ — совпадает ли ответ $B$ с приемлемыми ответами $A$;
		$w_i^A$ — важность вопроса по мнению $A$.
	\item Вычисляется доля удовлетворения $B$ ожиданий $A$:
	\[
	S_{AB} = \frac{\sum_{i=1}^{n} s_i^A \cdot w_i^A}{\sum_{i=1}^{n} w_i^A}
	\]
	\item Аналогично считается $S_{BA}$.
	\item Итоговая совместимость:
	\[
	C(A, B) = \sqrt{S_{AB} \cdot S_{BA}}
	\]
\end{enumerate}

Такой симметричный подход позволяет учитывать желания обеих сторон, что особенно важно в сфере знакомств\cite{rudder2013okcupid}.

Кроме ответов на вопросы, система также может учитывать:

\begin{itemize}
	\item географическое положение пользователей;
	\item возраст и пол;
	\item поведенческие метрики (например, активность и отклики);
	\item интересы, указанные в профиле;
	\item алгоритмы коллаборативной фильтрации на основе лайков.
\end{itemize}

Однако основным источником данных остаются именно опросы, что выгодно отличает OkCupid от других платформ.

Рекомендательная система OkCupid строится на принципах симметричной оценки, учитывающей как личные предпочтения, так и взаимные ожидания. Модель сочетает элементы экспертных систем и идеи коллаборативной фильтрации, что позволяет выдавать персонализированные рекомендации, основанные на содержательных признаках\cite{jablons2021collaborative}.

Тем не менее, использование опросов как основной основы для рекомендаций имеет ряд ограничений:

\begin{itemize}
	\item Самоотчетность. Пользователи могут отвечать неискренне, выбирая социально одобряемые ответы или предполагаемые предпочтения других, а не собственные.
	\item Ограниченность охвата. Даже при большом числе вопросов многие аспекты личности, поведения и совместимости остаются неохваченными.
	\item Неполные профили. Пользователи часто не отвечают на все доступные вопросы, что затрудняет построение точных рекомендаций.
	\item Фиксированные веса. Веса важности выставляются вручную, и пользователь может переоценить или недооценить значимость отдельных тем.
	\item Изменчивость во времени. Ответы могут устаревать, но система не всегда способна учитывать динамику изменения взглядов и предпочтений.
\end{itemize}

Таким образом, хотя подход OkCupid обладает значительной выразительной силой, его эффективность может снижаться при недостаточной мотивации пользователей честно и подробно заполнять анкету.

\subsubsection{Tinder}

Платформа Tinder делает акцент на скорости взаимодействия и минимализме в пользовательском интерфейсе. Это определяет и архитектуру рекомендательной системы: она почти полностью основана на поведенческих данных, а не на заранее структурированных опросах\cite{tinder_matching_method}.

Рекомендации Tinder опираются на наблюдение за действиями пользователя в реальном времени, применяя идеи из области ранжирования, коллаборативной фильтрации и машинного обучения.

\begin{itemize}
	\item Пользователь не заполняет анкету или тесты -- основным источником сигналов становится поведение (свайпы, матчи, отклики).
	\item Цель системы -- ранжировать потенциальных партнёров по вероятности положительного отклика.
	\item Взаимная симпатия (мэтч) служит основной меткой релевантности.
\end{itemize}

Ранее Tinder применял модификацию рейтинговой системы Elo, аналогичной той, что используется в шахматах. Каждому пользователю приписывался скрытый рейтинг $R$, который обновлялся при каждой паре действий:

\[
R_{A}^{\text{new}} = R_{A} + K \cdot (S - E)
\]

где:
\begin{itemize}
	\item $S$ — фактический результат (1, если $A$ получил лайк от $B$, 0 — если дизлайк);
	\item $E$ — ожидаемая вероятность положительного отклика, например:
	\[
	E = \frac{1}{1 + 10^{(R_B - R_A)/400}}
	\]
	\item $K$ — коэффициент обучения.
\end{itemize}

Со временем эта система была признана слишком статичной и неспособной учитывать сложные паттерны предпочтений.

В настоящее время Tinder использует более гибкий и масштабируемый подход на основе моделей обучения ранжированию и нейронных сетей. Ключевые особенности\cite{mlconf_tinvec}:

\begin{enumerate}
	\item Использование исторических свайпов как обучающего датасета.
	\item Обогащение признаков за счёт:
	\begin{itemize}
		\item времени суток, геолокации, возраста и пола;
		\item информации о взаимодействиях (ответы в чатах, продолжительность общения);
		\item изображений (модели компьютерного зрения извлекают визуальные эмбеддинги).
	\end{itemize}
	\item Применение моделей типа learning-to-rank, включая градиентный бустинг и глубокие нейросети.
	\item Возможное использование sequence-based моделей (например, RNN или трансформеров), учитывающих порядок свайпов.
\end{enumerate}

Хотя такой подход даёт хорошее качество персонализации, он не лишён ограничений:

\begin{itemize}
	\item Холодный старт. Новым пользователям сложно получить релевантные рекомендации до накопления истории свайпов.
	\item Смещение данных. Пользователи чаще свайпают по привлекательности, а не по глубинной совместимости.
	\item Неустойчивость. Поведение может быть ситуативным, но алгоритм воспринимает его как предпочтение.
	\item Мало объяснимости. Модель сложно интерпретировать или объяснить пользователю, почему показан тот или иной профиль.
\end{itemize}

Модель рекомендаций Tinder эволюционировала от простой системы рейтингов к сложной системе поведенческого ранжирования. Она эффективно масштабируется и адаптируется под предпочтения пользователя, но при этом страдает от отсутствия прозрачности и возможной поверхностности критериев совместимости\cite{vox_tinder_algorithm}.

\subsubsection{Hinge}

Платформа Hinge позиционирует себя как сервис для <<удаления>> приложения после нахождения подходящего партнёра. Это отражается и в её подходе к построению рекомендаций: модель ориентирована не на максимум свайпов, а на вероятность качественного взаимодействия. Рекомендательная система Hinge учитывает как поведенческие сигналы, так и контекстные данные, стремясь построить эффективные персонализированные предложения.

В основе лежат несколько ключевых принципов:
\begin{itemize}
	\item Система стремится обучаться на успешных взаимодействиях — прежде всего на лайках, приводящих к продолжительным диалогам.
	\item Учитывается не только сам факт лайка, но и качество последующего общения.
	\item Рекомендации строятся с использованием ранжирования, основанного на моделях типа learning-to-rank.
\end{itemize}

Ключевым источником вдохновения послужил алгоритм Gale–Shapley, использующийся в задаче стабильного брака. В оригинальной постановке каждый участник ранжирует партнёров, и цель — найти устойчивое соответствие. В адаптации Hinge этот принцип реализуется эвристически, через поиск так называемого «самого совместимого» партнёра дня, при этом система моделирует предпочтения обеих сторон\cite{fortune_hinge_ceo}.

Если обозначить:

\begin{itemize}
	\item $P(u, v)$ — вероятность успешного взаимодействия между пользователями $u$ и $v$;
	\item $R_u$ — рейтинг, отражающий склонность $u$ к взаимодействию с разными типами партнёров;
	\item $C_v$ — контекстные характеристики пользователя $v$;
\end{itemize}

то задача рекомендации может быть сведена к оценке:

\[
\hat{y}_{uv} = f(R_u, C_v)
\]

где $f$ — обученная модель, приближающая вероятность успешного взаимодействия. Под успешностью понимается не просто лайк, а наличие значимого чата или повторного контакта.

Кроме основных моделей, в системе используются дополнительные эвристики:

\begin{itemize}
	\item подавление повторяющихся шаблонов (например, слишком частые лайки одному типажу);
	\item учёт предпочтений по контенту профиля (фото, ответы на подсказки);
	\item отслеживание реакций на предложенные анкеты и их отложенное влияние.
\end{itemize}

Важной частью рекомендаций Hinge является система подбора пары дня. Она основывается на анализе двусторонних предпочтений, активности и недавнего поведения. Рекомендуемый партнёр имеет высокий прогнозируемый шанс на взаимную симпатию и заинтересованный диалог.

Несмотря на успех такой модели, она имеет определённые ограничения:

\begin{itemize}
	\item зависимость от истории пользователя, что создаёт проблему холодного старта;
	\item возможные локальные оптимумы: пользователь может застревать в узком профиле предложений;
	\item невысокая прозрачность — пользователю сложно понять, почему предложен тот или иной контакт.
\end{itemize}

В отличие от Tinder, Hinge делает ставку не на частоту свайпов, а на глубину взаимодействий. Это требует от системы учёта более сложных поведенческих метрик, включая динамику общения после совпадения. Такой подход требует более тонкой настройки, но лучше отвечает цели платформы — формированию устойчивых связей\cite{hdsr_hinge_matching}.


\subsubsection{eHarmony}

Рекомендательная система eHarmony изначально создавалась как экспертная модель совместимости, основанная на глубоком психологическом тестировании. Платформа ориентирована на долгосрочные отношения, а не на быстрые знакомства. Это определяет как архитектуру системы, так и методологию сбора и обработки данных.

В отличие от более поведенчески-ориентированных платформ, eHarmony делает ставку на анкеты, основанные на психологической типологии. При регистрации каждый пользователь заполняет обширную анкету, содержащую от 100 до 150 вопросов, касающихся:

\begin{itemize}
	\item личностных черт (экстраверсия, добросовестность, невротизм и др.);
	\item ценностей и жизненных установок;
	\item отношения к конфликтам, компромиссам, религии и карьере;
	\item предпочтений в партнёрстве и стиле общения.
\end{itemize}

Из ответов формируется вектор признаков $x \in \mathbb{R}^d$, где $d$ — число выделенных латентных характеристик. Далее используется модель оценки совместимости между двумя пользователями $u$ и $v$ на основе расстояния между их признаковыми векторами:

\[
S(u, v) = 1 - \frac{\lVert x_u - x_v \rVert}{D}
\]

где $D$ — нормирующий коэффициент (максимально возможное расстояние), а $S(u, v)$ — мера совместимости, принимающая значения от 0 до 1.

Алгоритм может включать дополнительные поправки:

\begin{itemize}
	\item усиление совпадений по наиболее значимым признакам;
	\item штрафы за критические несовпадения (например, по отношению к детям или религии);
	\item предпочтение партнёров, близких по возрасту, географии или культурному фону.
\end{itemize}

Система реализует фильтрацию на основе заранее определённой модели совместимости, а не обучения на пользовательском поведении. Это означает, что:

\begin{enumerate}
	\item рекомендации стабильны во времени и не зависят от текущей активности;
	\item пользователи получают небольшой, но тщательно отобранный список совпадений;
	\item основной целью алгоритма является структурная совместимость, а не привлекательность.
\end{enumerate}

Несмотря на высокую психологическую обоснованность, такой подход имеет ряд ограничений:

\begin{itemize}
	\item высокая когнитивная нагрузка при регистрации, что отпугивает часть пользователей;
	\item отсутствие адаптации под поведение — система не обучается на реальных откликах;
	\item возможная переориентация на типаж, а не на реальное разнообразие предпочтений.
\end{itemize}

Тем не менее, eHarmony демонстрирует устойчивую эффективность в своей нише, благодаря глубокой проработке модели совместимости и ориентации на фундаментальные ценности и личностные черты. Такой подход хорошо подходит для пользователей, ищущих стабильные и продолжительные отношения\cite{eHarmony}.

\subsection{Особенности сбора и представления пользовательских признаков}

В рекомендательных системах, применяемых в онлайн-знакомствах, центральную роль играет сбор и интерпретация информации о предпочтениях пользователей. Эти данные служат основой для построения персонализированных профилей и определения потенциально совместимых кандидатов. Анализ существующих решений в данной предметной области выявляет два крайних подхода к сбору информации:

\begin{itemize}
	\item длинные анкеты с детализированными вопросами, характерные для платформ вроде eHarmony, обеспечивают богатое представление о пользователе, но требуют значительных усилий при заполнении и приводят к высокой доле отказов;
	\item минималистичные интерфейсы типа Tinder предлагают быструю оценку по принципу свайпа, обеспечивая высокую конверсию, но теряя глубину предпочтений.
\end{itemize}

В качестве компромиссного решения рассматриваются тернарные опросы, в которых каждый вопрос допускает три варианта реакции: положительную, отрицательную и нейтральную. Это позволяет выразить отношение к различным характеристикам без излишней нагрузки. Каждый ответ кодируется значением $q_i \in \{-1, 0, 1\}$, где $i$ — номер вопроса. Такая шкала обеспечивает:

\begin{itemize}
	\item компактность векторного представления профиля;
	\item возможность учитывать отсутствие чёткой позиции;
	\item поддержку различных методов машинного обучения и заполнения пропусков.
\end{itemize}

Результаты сбора формируются в разреженную матрицу $R = (q_{u,i})$, где $u$ — пользователь, $i$ — вопрос, а $q_{u,i}$ — реакция. Пропущенные значения соответствуют отсутствию взаимодействия. На практике возможно использование стратегий заполнения: нулями, средним значением по вопросу, либо построение модели, устойчивой к разреженности.

В дополнение к ответам могут быть включены и другие признаки:

\begin{itemize}
	\item демографические данные — возраст (нормированный), пол (бинарная переменная);
	\item описания «о себе», конвертируемые в эмбеддинги с помощью языковых моделей;
	\item временные характеристики — длительность прохождения, количество пропусков, уверенность в ответах.
\end{itemize}

Особенность предметной области знакомств заключается в том, что каждый пользователь является одновременно субъектом и объектом рекомендаций. Это накладывает дополнительные требования к симметричности представлений и способности учитывать двустороннюю заинтересованность. Более того, успешность рекомендации здесь не сводится к лайку, а может быть оценена через цепочку взаимодействий: переписка, ответный интерес, встречи.

На этапе анализа задач были также выявлены следующие характеристики, которые следует учитывать при проектировании системы:

\begin{itemize}
	\item необходимость работать с разреженными признаковыми матрицами и отсутствием части информации;
	\item поддержка холодного старта для новых пользователей и вопросов;
	\item ориентация на сравнение пользователей между собой, а не на ранжирование объектов фиксированной природы.
\end{itemize}

Таким образом, представление предпочтений в тернарной форме, дополненное демографией и эмбеддингами, формирует универсальную основу для построения профилей. Эти профили могут использоваться в различных методах рекомендации — от коллаборативной фильтрации до кластеризации и нейросетевых моделей.

